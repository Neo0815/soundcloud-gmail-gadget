<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <style type="text/css">
      body {
        background: transparent;
        font-size: 13px;
        font-family: arial, sans-serif;
        color: #55688A;
      }
      .header {
        margin: 0px 0px 3px 3px;
      }
      ul {
        padding: 0;
        margin: 0;
      }
      li {
        list-style-type: none;
        padding: 0 0 10px 0;
        margin: 0;
        display: none;
      }
      a {
        color: #55688A;
        display: none;
      }
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="sc-gmail.js"></script>
    <script type="text/javascript" src="jQuery-URL-Parser/jquery.url.js"></script>
    <script type="text/javascript" src="test-helper.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var validUrls = [
         'http://soundcloud.com/forss/soulhack',
         'http://soundcloud.com/forss/soulhack?asd',
         'http://soundcloud.com/forss/sets/soulhack',
         'http://soundcloud.com/mightyoaksmusic/driftwood-seat?test=asd',
         'http://soundcloud.com/ma_remix/mein-lieblings-obst-sind#comment',
         'http://soundcloud.com/jberkel/sitting-on-the-dock-of-the-bay?test=asd&sdf=asd#comment',
         'http://soundcloud.com/hopit/sounds-from-sunday-morning/s-NUtxs',
         'http://soundcloud.com/hopit/3d-record-at-transit-on/s-1ziKa'
        ];
        $(document.body).scGMail( createMatches(validUrls), { callback: function(list){
            var heights = [0,0], cnt = 0, scnt = 0;
            $.each( list, function(url, height){
              if( cnt < 3) {
                heights[0] += height;
              }
              heights[1] += height;
              cnt += 1;
            });
            $('li').slice(0,3).show();
            console.log(heights[0]);
            if( cnt > 3 ) {
              $('a')
               .click( function() {
                  console.log(heights[(scnt+=1) % 2]);
                  $('li').slice(3).add('a').toggle();
                })
               .filter('.show')
               .html('Show ' + (cnt - 3) + ' more')
               .show();
            }
          }
        });
    </script>
  </head>
  <body>
    <div class="header">
      <a href="#" class="show">Show more</a>
      <a href="#">Hide</a>
    </div>
  </body>
</html>


